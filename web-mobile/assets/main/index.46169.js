System.register("chunks:///_virtual/audioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts"],(function(n){"use strict";var t,e,u;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy},function(n){u=n.default}],execute:function(){e._RF.push({},"25516+2Bq5C7Y0u7oBhUS5p","audioManager",void 0),n("AudioManager",function(){function n(){}return n.prototype.playSound=function(n,t,e){u.loadMusic("sound/"+n,(function(n,u){n||(t.volume=e,t.playOneShot(u))}))},t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/btnAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts"],(function(e){"use strict";var n,t,i,o,r,a,u,l,c,p,s;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,u=e.Button,l=e.CCFloat,c=e.AudioSource,p=e.Component},function(e){s=e.AudioManager}],execute:function(){var d,b,f,m,y,v,g,S,h,C,k,P,z,A,w;r._RF.push({},"6e515hCn0pMXIuVrMv+zPlu","btnAdapter",void 0);var M=a.ccclass,T=a.property,V=a.menu,_=a.requireComponent,D=a.disallowMultiple;e("btnAdapter",(d=M("btnAdapter"),b=V("自定义组件/btnAdapter"),f=_(u),m=T({tooltip:"点击后是否播放点击音效"}),y=T({tooltip:"点击音效名"}),v=T({type:l,min:0,max:1}),g=T({tooltip:"是否禁止快速二次点击"}),S=T({tooltip:"点击后多久才能再次点击,仅isPreventSecondClick为true生效,单位秒"}),d(h=b(h=f(h=D((k=n((C=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,i(n,"isPlaySound",k,o(n)),i(n,"clickSoundName",P,o(n)),i(n,"soundVolume",z,o(n)),i(n,"isPreventSecondClick",A,o(n)),i(n,"preventTime",w,o(n)),n}return t(n,e),n.prototype.onLoad=function(){var e=this,n=this.node.getComponent(u);this.node.on("click",(function(){if(e.isPreventSecondClick&&(n.interactable=!1,e.scheduleOnce((function(){n.node&&(n.interactable=!0)}),e.preventTime)),e.isPlaySound){var t=e.getComponent(c);t||(t=e.addComponent(c)),s.instance.playSound(e.clickSoundName,t,e.soundVolume)}}))},n}(p)).prototype,"isPlaySound",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),P=n(C.prototype,"clickSoundName",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"click"}}),z=n(C.prototype,"soundVolume",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),A=n(C.prototype,"isPreventSecondClick",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=n(C.prototype,"preventTime",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),h=C))||h)||h)||h)||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/chooseMode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./EventManager.ts","./uiManager.ts","./gameLogic.ts"],(function(e){"use strict";var o,n,t,s,c,i,a,r;return{setters:[function(e){o=e.inheritsLoose},function(e){n=e.cclegacy,t=e._decorator,s=e.Component},function(e){c=e.E_gameEvent},function(e){i=e.default},function(e){a=e.UiManager},function(e){r=e.default}],execute:function(){var u;n._RF.push({},"d7ee60PjxpCY75AnovULDEq","chooseMode",void 0);var l=t.ccclass;t.property,e("ChooseMode",l("ChooseMode")(u=function(e){function n(){return e.apply(this,arguments)||this}o(n,e);var t=n.prototype;return t.start=function(){},t.onClickBtn=function(e,o){var n=o;r.gameMode!=n?(i.dispatch(c.e_changeGameMode,n),this.onCloseSelf()):this.onCloseSelf()},t.onCloseSelf=function(){a.instance.hideDialog("chooseMode")},n}(s))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/constant.ts",["cc"],(function(e){"use strict";var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){e({E_battle_roomMsg:void 0,E_gameEvent:void 0,E_gameMode:void 0,E_gameSocketEvent:void 0,E_gameState:void 0}),o._RF.push({},"df4e3gDu1BHT7eF2G7MrZ5G","constant",void 0);var t=e("C_imgNameToIndexMap",(function(){}));t.default_btn_pressed=0,t.barRoomLightSp=1,t.barLDarkSp=2,t.barLightSp=3,t.gold=4,t.flower=5,t.gem=6,t.adornSpgold=7,t.adornSpflower=8,t.adornSpgem=9,t.bgmClose=10,t.bgmOpen=11,t.micClose=12,t.micOpen=13,t.voiceClose=14,t.voiceOpen=15;var n,_,a,c,y;e("C_barMoneyTweenTagList",[-1,1001,1002,1003,1004,1005,1006,1007,1008]),e("C_roomPathPos",{bar1:[{x:180,y:-400},{x:180,y:108},{x:-135,y:108},{x:-135,y:270}],bar2:[{x:180,y:-400},{x:180,y:108},{x:-29,y:108},{x:-29,y:242}],bar3:[{x:180,y:-400},{x:180,y:254}],bar4:[{x:180,y:-400},{x:180,y:108},{x:-125,y:108},{x:-125,y:126},{x:-217,y:126}],bar5:[{x:180,y:-400},{x:180,y:-181},{x:-35,y:-181},{x:-35,y:-72}],bar6:[{x:180,y:-400},{x:180,y:-181},{x:270,y:-181}],bar7:[{x:180,y:-400},{x:180,y:-181},{x:-217,y:-181}],bar8:[{x:180,y:-400},{x:180,y:-181},{x:18,y:-181},{x:18,y:-280}]}),e("C_roomMonsterPathPos",{bar1:[{x:415,y:-300,scaleX:1},{x:175,y:-300},{x:175,y:130},{x:-132,y:130},{x:-132,y:261},{x:-263,y:261}],bar2:[{x:415,y:-300},{x:175,y:-300},{x:175,y:130},{x:-100,y:130},{x:-38,y:130,scaleX:-1},{x:-38,y:270,scaleX:-1},{x:13,y:270,scaleX:-1}],bar3:[{x:415,y:-300},{x:175,y:-300},{x:175,y:130},{x:30,y:130},{x:175,y:130,scaleX:-1},{x:175,y:268,scaleX:-1},{x:268,y:268,scaleX:-1}],bar4:[{x:415,y:-300},{x:175,y:-300},{x:175,y:130},{x:-125,y:126},{x:-272,y:126},{x:-272,y:92}],bar5:[{x:415,y:-300},{x:175,y:-300},{x:175,y:80},{x:175,y:-176},{x:-33,y:-176},{x:-33,y:-56}],bar6:[{x:415,y:-300},{x:175,y:-300},{x:175,y:130},{x:175,y:-176,scaleX:-1},{x:282,y:-176,scaleX:-1},{x:282,y:-68,scaleX:-1}],bar7:[{x:415,y:-300},{x:175,y:-300},{x:175,y:0},{x:175,y:-176},{x:-215,y:-176},{x:-255,y:-248}],bar8:[{x:415,y:-300},{x:175,y:-300},{x:175,y:100},{x:175,y:-176},{x:23,y:-176},{x:23,y:-306}]}),e("C_currencyGears",{gold:[100,1e3,1e4],flower:[100,1e3,1e4],gem:[1,10,100]});!function(e){e.e_unkown="e_unkown",e.e_connect="e_connect",e.e_joinvViceRoom="e_joinvViceRoom",e.e_speakUser="speakUser",e.e_stopSpeakUser="stopSpeakUser",e.e_betSuccess="e_bet_success",e.e_joinGameModeSuccess="joinGameModeSuccess",e.e_diconnectSocketIO="diconnectSocketIO",e.e_beginToRun="beginToRun",e.e_monsterMove="monsterMove",e.e_androidRefreshBalance="androidRefreshBalance",e.e_resetMyCurrency="resetMyCurrency",e.e_monsterKill="monsterKill",e.e_betHistory="betHistory",e.e_selfbetChange="selfbetChange",e.e_leaveRoom="leaveRoom",e.e_joinRoom="joinRoom",e.e_betRoom="betRoom",e.e_clickBar="e_clickBar",e.e_backYield="e_backYield",e.e_changeGameMode="changeGameMode"}(n||(n=e("E_gameEvent",{}))),function(e){e[e.e_unkown=-1]="e_unkown",e.gold="gold",e.gem="gem",e.flower="flower"}(_||(_=e("E_gameMode",{}))),function(e){e[e.e_unkown=-1]="e_unkown",e[e.e_connectIng=0]="e_connectIng",e[e.e_connectFail=1]="e_connectFail",e[e.e_connectSucceed=2]="e_connectSucceed",e[e.e_countDown60Ing=3]="e_countDown60Ing",e[e.e_countDown5Ing=4]="e_countDown5Ing",e[e.e_killeerRunIng=5]="e_killeerRunIng",e[e.e_showResultIng=6]="e_showResultIng",e[e.e_changeModeIng=7]="e_changeModeIng",e[e.e_gameWaiting=8]="e_gameWaiting"}(a||(a=e("E_gameState",{}))),function(e){e.e_unkown="e_unkown",e.e_getBalance="get_balance",e.e_battle_join="battle_join",e.e_battle_bet="battle_bet",e.e_betHistory="battle_history",e.e_NBattle_gold_msg="battle_gold_msg",e.e_NBattle_gem_msg="battle_gem_msg",e.e_NBattle_flower_msg="battle_flower_msg",e.e_NBattle_settle_msg="battle_settle_msg"}(c||(c=e("E_gameSocketEvent",{}))),function(e){e.e_battle_room_join="battle_room_join",e.e_battle_room_leave="battle_room_leave",e.e_battle_room_bet_success="battle_room_bet_success"}(y||(y=e("E_battle_roomMsg",{}))),o._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,n,s,l,r,a,g,h,c,p,C,d,m,u,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,c=t.instantiate,p=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,T=t.Component}],execute:function(){var L,f,M,b,v,x,E,S,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(L=A("internal.DebugViewRuntimeControl"),f=y(r),M=y(r),b=y(r),L((E=e((x=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",E,n(e)),i(e,"singleModeToggle",S,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct TRT","Env TRT","TRT All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","TRT","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=c(s);l.parent=this.node,l.name="Buttons";var r=c(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var T=c(this.EnableAllCompositeModeButton.getChildByName("Label"));T.setPosition(i+(u>0?450:150),n,0),T.setScale(.75,.75,.75),T.parent=r;var L=T.getComponent(p);L.string=u?"----------Composite Mode----------":"----------Single Mode----------",L.color=a.WHITE,L.overflow=0,this.labelComponentList[this.labelComponentList.length]=L}n-=20;for(var f=0,M=0;M<this.strSingle.length;M++,f++){M===this.strSingle.length>>1&&(i+=200,f=0);var b=M?c(this.singleModeToggle):this.singleModeToggle;b.setPosition(i,n-20*f,0),b.setScale(.5,.5,.5),b.parent=this.singleModeToggle.parent;var v=b.getComponentInChildren(C);v.string=this.strSingle[M],this.textComponentList[this.textComponentList.length]=v,this.textContentList[this.textContentList.length]=v.string,b.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[M]=b}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var x=this.EnableAllCompositeModeButton.getComponentInChildren(p);this.labelComponentList[this.labelComponentList.length]=x;var E=c(this.EnableAllCompositeModeButton);E.setPosition(i+90,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.changeTextColor,this),E.parent=l,(x=E.getComponentInChildren(p)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=x;var S=c(this.EnableAllCompositeModeButton);S.setPosition(i+200,n,0),S.setScale(.5,.5,.5),S.on(m.EventType.CLICK,this.hideUI,this),S.parent=this.node.parent,(x=S.getComponentInChildren(p)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=x,this.hideButtonLabel=x,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=c(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?c(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(T)).prototype,"compositeModeToggle",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(x.prototype,"singleModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(x.prototype,"EnableAllCompositeModeButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=x))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/EventManager.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"8fc666bfoVBdbl0HG7++Yqy","EventManager",void 0),t("default",function(){function t(){}return t.registerEventListen=function(t,e,n,i){void 0===i&&(i=!1),!this.eventList[t]&&(this.eventList[t]=[]),this.getEventListenIsExist(t,e,n)||this.eventList[t].push({fun:e,target:n,once:i})},t.removeOneEventListen=function(t,e,n){var i=this.eventList[t];if(i)for(var s=[0,i.length],r=s[0],v=s[1];r<v;r++){var o=i[r];if(o.fun===e&&o.target===n)return void i.splice(r,1)}},t.dispatch=function(t,e){void 0===e&&(e=null);var n=this.eventList[t];if(n)for(var i=n.length-1;i>=0;i--){var s=n[i];if(s){try{s.fun&&s.fun.call(s.target,e)}catch(t){console.log(t)}s.once&&this.removeOneEventListen(t,s.fun,s.target)}}else console.log("event not registered："+t)},t.removeEventKeyAllEventListen=function(t){delete this.eventList[t]},t.removeTargetAllEventListen=function(t){if(t)for(var e in this.eventList){for(var n=this.eventList[e],i=0;i<n.length;i++){var s=n[i];s.target&&s.target===t&&(n.splice(i,1),i-=1)}0==n.length&&delete this.eventList[e]}else console.log("there is no such EventTarget:")},t.getEventListenIsExist=function(t,e,n){var i=this.eventList[t];if(i)for(var s=0,r=i.length;s<r;s++){var v=i[s];if(v.fun===e&&v.target===n)return!0}return!1},t.clearAllEventListen=function(){for(var t in this.eventList)delete this.eventList[t]},t}()).eventList={},e._RF.pop()}}}));

System.register("chunks:///_virtual/gameLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./EventManager.ts","./constant.ts","./socketIO.ts"],(function(e){"use strict";var n,o,t,i,a,c,s,r,d,l;return{setters:[function(e){n=e.createClass},function(e){o=e.cclegacy,t=e.sys,i=e.find},function(e){a=e.DEBUG},function(e){c=e.default},function(e){s=e.E_gameMode,r=e.E_gameState,d=e.E_gameEvent},function(e){l=e.default}],execute:function(){var u;o._RF.push({},"b6eeddtwEdPDYszSPn2rVjb","gameLogic",void 0);var h=e("default",function(){function e(){}return e.updateCurrency=function(e,n){this.gameModeToCurrencymap[e]=n||0},e.initGameLogic=function(){var e=this;window.android||(window.android={}),window.android.refreshBalance=function(){console.log("刷新余额"),c.dispatch(d.e_androidRefreshBalance)},window.android.joinBack=function(n){console.log("加入房间是否成功",n),n?c.dispatch(d.e_joinvViceRoom):e.showToast("JOIN VOICE FAIL",2e3)},window.android.speakUser=function(e){c.dispatch(d.e_speakUser,e)},window.android.stopSpeakUser=function(e){c.dispatch(d.e_stopSpeakUser,e)},console.log("Token:",this.getPlayerToken()),console.log("SocketUrl:",this.getSocketIOUrl()),console.log("是否是测试环境:",a,this.getIsDebugEnv()),console.log("当前设备实际环境:",this.getPracticalPlatform()),console.log("头像cdn地址:",this.getImgCdn())},e.getIsDebugEnv=function(){return this._isDebugIndex},e.getPracticalPlatform=function(){var e=navigator.platform;return"Win32"==e?t.Platform.DESKTOP_BROWSER:"iPhone"==e?t.Platform.IOS:t.Platform.ANDROID},e.getImgCdn=function(){return this.getIsDebugEnv()?this._imgCnUrlInDev:this._imgCnUrlInRel},e.getPlayerToken=function(){return this._playerToken||(this.getPracticalPlatform()==t.Platform.ANDROID?this._playerToken=window.android.getToken():this.getPracticalPlatform()==t.Platform.IOS?window.webkit.messageHandlers.getToken.postMessage("1"):this._playerToken="server_token=s%3APbTflPFL0U2wyBCstCRmQ87Is5UUMLuC.FBGUj8R4ImzaIXFfD0WRh%2F%2FbeFJ8eNvX2rVREUd6P0o"),this._playerToken},e.getSocketIOUrl=function(){return this.getIsDebugEnv()?this._socketIOUrl="https://dev-game.lovechatbar.com":this._socketIOUrl="https://game.lovechatbar.com",this._socketIOUrl},e.hideFlashScreen=function(){window.customObejeck.hideFlashScreen()},e.showToast=function(e,n){void 0===n&&(n=3e3),window.customObejeck.showToast(e,n)},e.getVersion=function(){return window.customObejeck.getVersion()},e.inviteRoom=function(e,n){this.checkIsInWindow()||window.android.inviteRoom(e,n)},e.exitVoiceRoom=function(){this.checkIsInWindow()||window.android.exitRoom()},e.isUpMic=function(e){this.checkIsInWindow()||(e?window.android.upMic():window.android.downMic(),null!=this._enableMic&&this.enableMic(this._enableMic),null!=this._enableVoice&&this.enableVoice(this._enableMic))},e.enableMic=function(e){this.checkIsInWindow()||(this._enableMic=e,window.android.enableMic(e))},e.enableVoice=function(e){this.checkIsInWindow()||(this._enableVoice=e,window.android.enableVoice(e))},e.starBGM=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=10),this.checkIsInWindow()||e&&2==this._isPlayBgmType||(e||1!=this._isPlayBgmType)&&(this._isPlayBgmType=1,window.android.starBGM(n))},e.stopBGM=function(){this.checkIsInWindow()||(this._isPlayBgmType=2,window.android.stopBGM())},e.goBack=function(){l.closeSocket(),this.checkIsInWindow()||(this.stopBGM(),window.android.goBack())},e.jumpRecharge=function(){this.checkIsInWindow()||window.android.jumpRecharge()},e.checkIsInWindow=function(){return this.getPracticalPlatform()==t.Platform.DESKTOP_BROWSER},e.findNode=function(e,n){var o=n.uuid+"/"+e;if(this._nodePathCache.get(o))return this._nodePathCache.get(o);var t=i(e,n);return this._nodePathCache.set(o,t),t},n(e,null,[{key:"gameMode",get:function(){return this._curGameMode},set:function(e){this._curGameMode=e}},{key:"gameState",get:function(){return this._curGameState},set:function(e){this._curGameState=e}}]),e}());h.mainUiInstance=void 0,h.gameRootUiInstance=void 0,h.playerCoinNum=0,h.playerFlowerNum=0,h.playerGemNum=0,h.curGameId=void 0,h.oneRoundTime=0,h.curCountTime=h.oneRoundTime,h.curTodayRound=0,h.myTotalBet=0,h.curRoundResult=null,h.joinBattleRoomBackData=null,h.allBetPlayerMap=new Map,h.allPlayerOnlineMap=new Map,h.yetCreatePlayerNode=new Map,h.curChooseIndex=1,h.curChooseRoomIndex=-1,h._curGameMode=s.e_unkown,h._curGameState=r.e_unkown,h.selfInfoData={userId:"",avatar:"",rtcToken:"",chatRoomId:""},h._imgCnUrlInDev="https://dev-img.lovechatbar.com/image/",h._imgCnUrlInRel="https://img.lovechatbar.com/image/",h._playerToken=void 0,h._socketIOUrl=void 0,h._isDebugIndex=window.customObejeck.getIsDebugIndex(),h.gameModeToCurrencymap=((u={})[s.gold]=h.playerCoinNum,u[s.flower]=h.playerFlowerNum,u[s.gem]=h.playerGemNum,u),h._enableMic=null,h._enableVoice=null,h._isPlayBgmType=-1,h._nodePathCache=new Map,o._RF.pop()}}}));

System.register("chunks:///_virtual/gameRoot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameLogic.ts","./EventManager.ts","./constant.ts","./resourceUtil.ts","./socketIO.ts"],(function(e){"use strict";var t,o,n,i,r,c,s,a,u,l,d,f,g,p,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,s=e.Node,a=e.Label,u=e.Component},function(e){l=e.default},function(e){d=e.default},function(e){f=e.E_gameMode,g=e.E_gameEvent},function(e){p=e.default},function(e){m=e.default}],execute:function(){var h,v,b,L,R,y,E;r._RF.push({},"03670VAigtDV6rQbjzrXbdU","gameRoot",void 0);var F=c.ccclass,_=c.property;e("GameRoot",(h=F("GameRoot"),v=_(s),b=_(s),h((y=t((R=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,n(t,"uiNode",y,i(t)),n(t,"popUiNode",E,i(t)),t.isFirstSucceed=!0,t}o(t,e);var r=t.prototype;return r.onLoad=function(){l.gameMode=f.flower,l.gameRootUiInstance=this,l.initGameLogic(),this.registerEventListenFun(),m.toConnect(),p.preloadAsset(),l.findNode("versionLab",this.node).getComponent(a).string=l.getVersion()},r.registerEventListenFun=function(){window.addEventListener("beforeunload",(function(e){l.goBack()})),d.registerEventListen(g.e_joinvViceRoom,this.joinVoiceRoom,this),d.registerEventListen(g.e_connect,this.connectGame,this)},r.closeGame=function(){l.goBack()},r.joinVoiceRoom=function(){console.log("收到加入语音房间成功的消息"),l.isUpMic(!0)},r.connectGame=function(){this.isFirstSucceed&&(p.preloadAsset(),l.hideFlashScreen(),this.isFirstSucceed=!1),m.emitGetBalance(),m.joinBattleRoom(l.gameMode)},t}(u)).prototype,"uiNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(R.prototype,"popUiNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=R))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/help.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts"],(function(e){"use strict";var t,n,o,r,i;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,r=e.Component},function(e){i=e.UiManager}],execute:function(){var c;n._RF.push({},"9bf45y+HddIDL5ewiequKVg","help",void 0);var s=o.ccclass;o.property,e("Help",s("Help")(c=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.closeSelf=function(){i.instance.hideDialog("helpNode")},n}(r))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./EventManager.ts","./TimerModule.ts","./audioManager.ts","./btnAdapter.ts","./constant.ts","./gameRoot.ts","./resourceUtil.ts","./socketIO.ts","./uiManager.ts","./util.ts","./gameLogic.ts","./chooseMode.ts","./help.ts","./pop.ts","./mainUiNode.ts","./monsterHead.ts","./playerHead.ts","./record.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/mainUiNode.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./TimerModule.ts","./constant.ts","./socketIO.ts","./uiManager.ts","./util.ts","./gameLogic.ts","./playerHead.ts"],(function(e){"use strict";var t,o,i,n,s,a,r,d,c,u,l,h,m,p,g,f,b,C,v,N,L,y,I,R,S,F,B,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,r=e.SpriteFrame,d=e.Prefab,c=e.Node,u=e.Label,l=e.v3,h=e.Sprite,m=e.TweenSystem,p=e.tween,g=e.instantiate,f=e.Component},function(e){b=e.default},function(e){C=e.default},function(e){v=e.E_gameEvent,N=e.C_imgNameToIndexMap,L=e.E_gameState,y=e.C_currencyGears,I=e.C_barMoneyTweenTagList},function(e){R=e.default},function(e){S=e.UiManager},function(e){F=e.Util},function(e){B=e.default},function(e){M=e.PlayerHead}],execute:function(){var T,x,w,k,_,P,A,D,O,E,U,Y,j,H,z,G,J,V,q;s._RF.push({},"05b81L68l1HrrTjU14uwdSC","mainUiNode",void 0);var K=a.ccclass,Q=a.property;e("MainUiNode",(T=K("MinUiNode"),x=Q({type:r,group:"数组"}),w=Q(d),k=Q(d),_=Q(c),P=Q({type:c,tooltip:"玩家待的区域"}),A=Q({type:c,tooltip:"八个Bar的节点数组",group:"数组"}),D=Q({type:u,tooltip:"底部选择下注金额的"}),O=Q({type:c,tooltip:"底部玩家的出身区域"}),T((Y=t((U=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,i(t,"spFArrList",Y,n(t)),i(t,"headerNodesPrefab",j,n(t)),i(t,"monsterNodesPrefab",H,n(t)),i(t,"clickBarLayouts",z,n(t)),i(t,"playerHeadNodes",G,n(t)),i(t,"barNodes",J,n(t)),i(t,"chooseCountLab",V,n(t)),i(t,"buttomYieldLayout",q,n(t)),t._monsterNode=null,t.selectBoxNode=void 0,t.chooseBtnLabList={gold:"باتل رويال · عملة ذهبية",gem:"باتل رويال · جوهرة",flower:"باتل رويال · زهور"},t.betClickRecordList=[],t.bgmIsOpen=!0,t.micIsOpen=!0,t.voiceIsOpen=!0,t.main60timer=void 0,t.limitedRunCount=0,t}o(t,e);var s=t.prototype;return s.onLoad=function(){B.mainUiInstance=this,b.registerEventListen(v.e_betSuccess,this.betSuccessBack,this,!1),b.registerEventListen(v.e_changeGameMode,this.changeMode,this,!1),b.registerEventListen(v.e_joinGameModeSuccess,this.joinGameModeSuccess,this,!1),b.registerEventListen(v.e_diconnectSocketIO,this.stopAllTimer,this,!1),b.registerEventListen(v.e_beginToRun,this.beginToRun,this,!1),b.registerEventListen(v.e_resetMyCurrency,this.resetMyCurrency,this,!1),b.registerEventListen(v.e_backYield,this.barRoomReset,this,!1),b.registerEventListen(v.e_joinRoom,this.playerJoinRoom,this,!1),b.registerEventListen(v.e_betRoom,this.playerBetRoom,this,!1)},s.start=function(){this.selectBoxNode=B.findNode("selectBox",this.node),this.updateSelectBox(),this.changeMode(B.gameMode,!0)},s.initSelfHead=function(){var e=this,t=B.joinBattleRoomBackData,o=t.roomUsers;t.players.forEach((function(t){if(t.userId!=B.selfInfoData.userId){var o=l(),i=e.playerHeadNodes.children[t.pour-1];F.getRandomPosInNode(i,o),F.convertPositionToTargetNodeSpace(i.getParent(),i,o,o),e.joinRoom(i,o,{isSelf:!1,userId:t.userId,avatar:t.avatar,isLeaveYieldLayout:!0,betIndex:t.pour}),B.allBetPlayerMap.set(t.userId,t.pour)}var n=B.findNode("node"+t.pour+"/coinSp",e.clickBarLayouts),s=B.findNode("coinLab",n).getComponent(u);s.string=((parseFloat(s.string)?parseFloat(s.string):0)+t.amount).toString()})),o.forEach((function(t){var o=t.userId;if(B.allPlayerOnlineMap.set(o,!0),!B.allBetPlayerMap.has(o)){var i=l();F.getRandomPosInNode(e.buttomYieldLayout,i),F.convertPositionToTargetNodeSpace(e.buttomYieldLayout.getParent(),e.buttomYieldLayout,i,i),e.joinRoom(e.buttomYieldLayout,i,{isSelf:!1,userId:o,avatar:t.avatar,isLeaveYieldLayout:!1,betIndex:-1})}}));var i=B.curChooseRoomIndex>=1,n=l();if(i){var s=this.playerHeadNodes.children[B.curChooseRoomIndex-1];F.getRandomPosInNode(s,n),F.convertPositionToTargetNodeSpace(s.getParent(),s,n,n),this.joinRoom(s,n,{isSelf:!0,userId:B.selfInfoData.userId,avatar:B.selfInfoData.avatar,isLeaveYieldLayout:!0,betIndex:B.curChooseRoomIndex});var a=this.barNodes[B.curChooseRoomIndex];a.getComponent(h).spriteFrame=this.spFArrList[N.barRoomLightSp],B.findNode("barSp",a).getComponent(h).spriteFrame=this.spFArrList[N.barLightSp]}else F.getRandomPosInNode(this.buttomYieldLayout,n),F.convertPositionToTargetNodeSpace(this.buttomYieldLayout.getParent(),this.buttomYieldLayout,n,n),this.joinRoom(this.buttomYieldLayout,n,{isSelf:!0,userId:B.selfInfoData.userId,avatar:B.selfInfoData.avatar,isLeaveYieldLayout:!1,betIndex:B.curChooseRoomIndex});this.scheduleOnce((function(){b.dispatch(v.e_selfbetChange,B.myTotalBet)}))},s.onClickBar=function(e,t){if(console.log("点击一个bar",t),B.gameState==L.e_countDown60Ing){var o=parseFloat(t);if(o!=B.curChooseRoomIndex){if(B.curChooseRoomIndex>=1){if(B.myTotalBet>0)return void B.showToast("A bar has been selected");if(this.betClickRecordList.length>0)return void B.showToast("A bar has been selected")}var i=e.target;if(i.getComponent(h).spriteFrame=this.spFArrList[N.barRoomLightSp],B.findNode("barSp",i).getComponent(h).spriteFrame=this.spFArrList[N.barLightSp],-1!=B.curChooseRoomIndex){var n=B.findNode("node"+B.curChooseRoomIndex,this.clickBarLayouts);n.getComponent(h).spriteFrame=null,B.findNode("barSp",n).getComponent(h).spriteFrame=this.spFArrList[N.barLDarkSp]}B.curChooseRoomIndex=o,b.dispatch(v.e_clickBar,o)}}},s.barRoomReset=function(){if(this.startCountdown(B.oneRoundTime),B.curChooseRoomIndex>=1){var e=this.barNodes[B.curChooseRoomIndex];e.getComponent(h).spriteFrame=null,B.findNode("barSp",e).getComponent(h).spriteFrame=this.spFArrList[N.barLDarkSp]}B.curRoundResult=null,B.curChooseRoomIndex=-1,B.myTotalBet=0,this.limitedRunCount=0,this.betClickRecordList=[];for(var t=1;t<=8;t++){var o=this.barNodes[t];B.findNode("coinSp/coinLab",o).getComponent(u).string="0"}},s.checkPlaerCurrencyCountIsEnough=function(e){var t=B.findNode("topLeftCoinNode/coinLab",this.node).getComponent(u);return e?parseFloat(t.string)>=e:parseFloat(t.string)>=parseFloat(this.chooseCountLab.getComponent(u).string)},s.betSuccessBack=function(e){if(200==e.code){var t=this.betClickRecordList.shift();B.myTotalBet+=t.betNum,b.dispatch(v.e_selfbetChange,B.myTotalBet)}else{B.showToast("Bet Fail",1e3);var o=this.betClickRecordList.shift();this.barMoneyChange(o.clickIndex,-o.betNum),B.updateCurrency(B.gameMode,B.gameModeToCurrencymap[B.gameMode]+o.betNum),this.resetMyCurrency()}},s.onClickOtherBtn=function(e,t){if(console.log("点击界面上的按钮",t),B.gameState==L.e_countDown60Ing)switch(t){case"rank":break;case"record":S.instance.showDialog("recordNode",B.gameRootUiInstance.popUiNode,"Record");break;case"bet":if(this.checkPlaerCurrencyCountIsEnough())if(B.curChooseRoomIndex<0)B.showToast("Please Choose A Bar");else{var o=parseFloat(this.chooseCountLab.getComponent(u).string),i=B.curChooseRoomIndex;R.emitBet(o,i);var n={betNum:o,clickIndex:i};this.betClickRecordList.push(n),this.barMoneyChange(i,o),B.updateCurrency(B.gameMode,B.gameModeToCurrencymap[B.gameMode]-o),this.resetMyCurrency()}else B.showToast("Money Not Enough",2e3);break;case"choose":this.selectBoxNode.active=!this.selectBoxNode.active;break;case"recharge":break;case"chooseMode":if(B.curChooseRoomIndex>=1)return;S.instance.showDialog("chooseMode",B.gameRootUiInstance.popUiNode,"ChooseMode");break;case"micBtn":this.micIsOpen=!this.micIsOpen,B.enableMic(this.micIsOpen),B.findNode("micNode/micOpen",this.node).getComponent(h).spriteFrame=this.spFArrList[this.micIsOpen?N.micOpen:N.micClose];break;case"voiceBtn":this.voiceIsOpen=!this.voiceIsOpen,B.enableVoice(this.voiceIsOpen),B.findNode("voiceNode/voiceOpen",this.node).getComponent(h).spriteFrame=this.spFArrList[this.voiceIsOpen?N.voiceOpen:N.voiceClose];break;case"bgmBtn":this.bgmIsOpen=!this.bgmIsOpen,this.bgmIsOpen?(B.starBGM(),B.findNode("bgmNode/bgmOpen",this.node).getComponent(h).spriteFrame=this.spFArrList[N.bgmOpen]):(B.stopBGM(),B.findNode("bgmNode/bgmOpen",this.node).getComponent(h).spriteFrame=this.spFArrList[N.bgmClose]);break;case"helpBtn":S.instance.showDialog("helpNode",B.gameRootUiInstance.popUiNode,"Help");break;default:console.error("点击错误")}},s.onClickItemBtn=function(e,t){var o=parseFloat(t);o!=B.curChooseIndex&&(B.findNode("item"+B.curChooseIndex,this.selectBoxNode).getComponent(h).spriteFrame=null,B.curChooseIndex=o,B.findNode("item"+o,this.selectBoxNode).getComponent(h).spriteFrame=this.spFArrList[N.default_btn_pressed],this.chooseCountLab.string=y[B.gameMode][B.curChooseIndex-1].toString()),this.selectBoxNode.active=!1},s.barMoneyChange=function(e,t){var o=B.findNode("node"+e+"/coinSp",this.clickBarLayouts);if(m.instance.ActionManager.getActionByTag(I[e],o)){var i=B.findNode("coinLab",o).getComponent(u);i.string=((parseFloat(i.string)?parseFloat(i.string):0)+t).toString()}else p(o).tag(I[e]).to(.2,{scale:l(1.3,1.3,1)},{easing:"cubicIn"}).call((function(){var e=B.findNode("coinLab",o).getComponent(u);e.string=((parseFloat(e.string)?parseFloat(e.string):0)+t).toString()})).to(.1,{scale:l(1,1,1)},{easing:"cubicOut"}).start()},s.changeMode=function(e,t){var o=this;void 0===t&&(t=!1),this.stopAllTimer(),S.instance.hideDialog("popNode"),B.gameState=L.e_changeModeIng,B.gameMode=e,this.barRoomReset();var i=B.findNode("chooseModeBtn",this.node);B.findNode("adornSp",i).getComponent(h).spriteFrame=this.spFArrList[N["adornSp"+e]],B.findNode("btnLab",i).getComponent(u).string=this.chooseBtnLabList[e],B.findNode("coin40px",this.chooseCountLab.node.parent).getComponent(h).spriteFrame=this.spFArrList[N[e]],B.findNode("topLeftCoinNode/coin40px",this.node).getComponent(h).spriteFrame=this.spFArrList[N[e]],this.clickBarLayouts.children.forEach((function(t,i){B.findNode("coinSp",t).getComponent(h).spriteFrame=o.spFArrList[N[e]]})),this.updateSelectBox(),t||R.joinBattleRoom(e)},s.joinGameModeSuccess=function(){var e=B.curCountTime,t=B.findNode("mainUITimeDownBg",this.node),o=B.findNode("countDown",t),i=B.findNode("killerAriseLab",t);e<=0?(o.active=!1,i.active=!0,this.startCountdown(B.oneRoundTime)):e>3?(o.active=!0,i.active=!1,this.startCountdown()):(o.active=!1,i.active=!0,this.startCountdown(B.oneRoundTime),this.startCountdown5(e))},s.startCountdown=function(e){var t=this;void 0===e&&(e=-1);var o=B.findNode("mainUITimeDownBg/countDown/timeLab",this.node).getComponent(u);e>=0?o.string=e.toString():(B.gameState=L.e_countDown60Ing,this.doorChange(),o.string=B.curCountTime.toString(),this.main60timer||(this.main60timer=new C),this.main60timer.startTimer((function(){if(B.curCountTime-=1,3==B.curCountTime&&t.startCountdown5(3),B.curCountTime<0){var e=B.findNode("mainUITimeDownBg",t.node);return B.findNode("countDown",e).active=!1,B.findNode("killerAriseLab",e).active=!0,void t.main60timer.stopTimer()}o.string=B.curCountTime.toString()})))},s.startCountdown5=function(e){if(void 0===e&&(e=3),B.gameState!=L.e_changeModeIng){B.gameState=L.e_countDown5Ing,S.instance.hideDialog("recordNode"),S.instance.hideDialog("chooseMode"),S.instance.hideDialog("helpNode"),this.selectBoxNode.active=!1,this.doorChange();S.instance.showDialog("popNode",B.gameRootUiInstance.popUiNode,"Pop",null,(function(){var t={showName:"slayerAriseNode",residueTime:e};this.showPanel&&this.showPanel(t)}))}},s.beginToRun=function(){if(this.limitedRunCount+=1,!(this.limitedRunCount<2))if(this.limitedRunCount=0,B.gameState=L.e_killeerRunIng,this._monsterNode)b.dispatch(v.e_monsterMove,B.curRoundResult.loseNum);else{var e=g(this.monsterNodesPrefab);e.setSiblingIndex(99),e.parent=this.node,b.dispatch(v.e_monsterMove,B.curRoundResult.loseNum),this._monsterNode=e}},s.joinRoom=function(e,t,o){if(!B.yetCreatePlayerNode.has(o.userId)){B.yetCreatePlayerNode.set(o.userId,!0);var i=this.instanceHead();i.parent=e,i.position=t,i.getComponent(M).setData(o)}},s.instanceHead=function(){return g(this.headerNodesPrefab)},s.updateSelectBox=function(){var e=this;B.curChooseIndex=1;var t=y[B.gameMode];this.selectBoxNode.children.forEach((function(o,i){o.getComponent(h).spriteFrame=i+1==B.curChooseIndex?e.spFArrList[N.default_btn_pressed]:null,B.findNode("coinLab",o).getComponent(u).string=t[i].toString(),B.findNode("coin40px",o).getComponent(h).spriteFrame=e.spFArrList[N[B.gameMode]]})),B.findNode("coin40px",this.chooseCountLab.node.parent).getComponent(h).spriteFrame=this.spFArrList[N[B.gameMode]],this.chooseCountLab.string=t[0].toString()},s.stopAllTimer=function(){this.main60timer&&this.main60timer.stopTimer()},s.resetMyCurrency=function(){B.findNode("topLeftCoinNode/coinLab",this.node).getComponent(u).string=B.gameModeToCurrencymap[B.gameMode].toString()},s.doorChange=function(){var e=B.gameState,t=B.findNode("doorBig",this.node),o=B.findNode("doorNode",this.node);e==L.e_countDown60Ing?(t.active=!1,o.active=!1):e==L.e_killeerRunIng?(t.active=!0,o.active=!0):e==L.e_showResultIng?(t.active=!1,o.active=!1):(t.active=!0,o.active=!0)},s.playerJoinRoom=function(e){var t=l();F.getRandomPosInNode(this.buttomYieldLayout,t),F.convertPositionToTargetNodeSpace(this.buttomYieldLayout.getParent(),this.buttomYieldLayout,t,t),this.joinRoom(this.buttomYieldLayout,t,{isSelf:!1,userId:e.id,avatar:e.avatar,isLeaveYieldLayout:!1,betIndex:-1})},s.playerBetRoom=function(e){this.barMoneyChange(e.pour,e.amount)},t}(f)).prototype,"spFArrList",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=t(U.prototype,"headerNodesPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(U.prototype,"monsterNodesPrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(U.prototype,"clickBarLayouts",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(U.prototype,"playerHeadNodes",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(U.prototype,"barNodes",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),V=t(U.prototype,"chooseCountLab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=t(U.prototype,"buttomYieldLayout",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=U))||E));s._RF.pop()}}}));

System.register("chunks:///_virtual/monsterHead.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./constant.ts","./uiManager.ts","./gameLogic.ts"],(function(t){"use strict";var n,e,o,i,a,s,r,l,c,u,p,d,h,m;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.v3,a=t.tween,s=t.Animation,r=t.Vec3,l=t.Component},function(t){c=t.default},function(t){u=t.E_gameEvent,p=t.E_gameState,d=t.C_roomMonsterPathPos},function(t){h=t.UiManager},function(t){m=t.default}],execute:function(){var f;e._RF.push({},"d8a79IjqBJOKogh9f53nKxF","monsterHead",void 0);var v=o.ccclass;o.property,t("MonsterHead",v("MonsterHead")(f=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this).speed=180,n._initPos=void 0,n._playOverCount=2,n._playCount=0,n}n(e,t);var o=e.prototype;return o.onLoad=function(){c.registerEventListen(u.e_monsterMove,this.playerHeadRunFromYield,this)},o.start=function(){},o.playerHeadRunFromYield=function(t){var n=this,e=this.node.parent,o=d["bar"+t];this._initPos=i(o[0].x,o[0].y),e.setPosition(this._initPos);var l=a(e);this.node.getComponent(s).play("monsterAnim");for(var c=i(o[0].x,o[0].y,0),u=function(){var t=o[p],a=i(t.x,t.y);l.call((function(){e.setScale(t.scaleX?t.scaleX:1,1,1)})),l.to(r.distance(c,a)/n.speed,{position:a}),c=a},p=1;p<o.length;p++)u();l.call((function(){n.node.getComponent(s).play("killAnim")})),l.start()},o.killAnimOver=function(){if(this._playCount>=this._playOverCount-1){c.dispatch(u.e_monsterKill),m.gameState=p.e_showResultIng,m.mainUiInstance.doorChange();h.instance.showDialog("popNode",m.gameRootUiInstance.popUiNode,"Pop",null,(function(){this.showPanel({showPanelTypeStr:"result"})}))}else;},o.animOver=function(){var t=this;if(this._playCount+=1,this._playCount>=this._playOverCount)return c.dispatch(u.e_backYield),this.node.getComponent(s).play("monsterAnim"),void this.scheduleOnce((function(){t._playCount=0,t.node.parent.setPosition(t._initPos),t.node.parent.setScale(1,1,1)}),2);this.node.getComponent(s).play("killAnim")},e}(l))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/playerHead.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./constant.ts","./resourceUtil.ts","./util.ts","./gameLogic.ts"],(function(e){"use strict";var t,i,o,n,s,a,r,c,d,l,h,v,u,p,m,f,g,y,P,I,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,r=e.Sprite,c=e.Node,d=e.Tween,l=e.v3,h=e.v2,v=e.tween,u=e.Vec3,p=e.Label,m=e.Component},function(e){f=e.default},function(e){g=e.E_gameEvent,y=e.C_roomPathPos},function(e){P=e.default},function(e){I=e.Util},function(e){S=e.default}],execute:function(){var b,L,N,T,k,x,B;s._RF.push({},"06273y9Ml5C2p7Jt1mZjLrg","playerHead",void 0);var R=a.ccclass,Y=a.property;e("PlayerHead",(b=R("PlayerHead"),L=Y({type:r,tooltip:""}),N=Y({type:c,tooltip:"麦克风图标"}),b((x=t((k=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,o(t,"headIconSp",x,n(t)),o(t,"micNode",B,n(t)),t.isSelf=!1,t.clickBarIndex=-1,t.isLeaveYieldLayout=!1,t.isArriveDestinnation=!1,t.isKill=!1,t.speed=170,t.data=void 0,t.timeId=-1,t.vector=null,t}i(t,e);var s=t.prototype;return s.start=function(){f.registerEventListen(g.e_clickBar,this.receiveClickBarEvent,this,!1),f.registerEventListen(g.e_backYield,this.backYield,this,!1),f.registerEventListen(g.e_monsterKill,this.monsterKill,this,!1),f.registerEventListen(g.e_leaveRoom,this.leaveRoom,this,!1),f.registerEventListen(g.e_betRoom,this.betRoom,this,!1),f.registerEventListen(g.e_speakUser,this.speakUser,this,!1),f.registerEventListen(g.e_stopSpeakUser,this.stopSpeakUser,this,!1),f.registerEventListen(g.e_selfbetChange,this.selfbetChange,this,!1)},s.setData=function(e){this.data=e,this.isSelf=e.isSelf,this.isLeaveYieldLayout=e.isLeaveYieldLayout,this.clickBarIndex=e.betIndex,I.setPlayerHeadImg(e.avatar,this.headIconSp,45,45)},s.resetData=function(){this.clickBarIndex=-1,this.isLeaveYieldLayout=!1,this.isArriveDestinnation=!1,this.isKill=!1},s.receiveClickBarEvent=function(e){if(this.isSelf){if(this.isArriveDestinnation){d.stopAllByTarget(this.node),this.clickBarIndex=e;var t=S.mainUiInstance.playerHeadNodes.children[e-1],i=l();return I.getRandomPosInNode(t,i),I.convertPositionToTargetNodeSpace(t.getParent(),t,i,i),this.node.removeFromParent(),this.node.position=i,void(this.node.parent=t)}if(-1!=this.clickBarIndex)return d.stopAllByTarget(this.node),this.isLeaveYieldLayout?void this.playerHeadRunPlanB(e,y["bar"+this.clickBarIndex]):(this.clickBarIndex=e,void this.playerHeadRunFromYield(e));this.clickBarIndex=e,this.playerHeadRunFromYield(e)}},s.playerHeadRunPlanB=function(e,t){var i=S.mainUiInstance.buttomYieldLayout;this.clickBarIndex=e;var o=this.node.getPosition(),n=l();I.convertPositionToTargetNodeSpace(i,i.getParent(),o,n);for(var s=y["bar"+e],a=-1,r=-1,c=s.length-1;c>=0;c--){var d=void 0,p=s[c];if(!(c>0)){console.log("已经遍历完了");for(var m=0;m<t.length;m++){var f=t[m],g=t[m+1];if(!g)return this.isArriveDestinnation=!0,void this.receiveClickBarEvent(e);if(I.isPointOnSegment(h(n.x,n.y),h(f.x,f.y),h(g.x,g.y))){r=m;break}}break}if(d=s[c-1],I.isPointOnSegment(h(n.x,n.y),h(d.x,d.y),h(p.x,p.y))){a=c;break}}function P(n,c){var d=this,h=v(this.node),p=o;if(!n){var m=t[r],f=l(m.x,m.y);return I.convertPositionToTargetNodeSpace(i.getParent(),i,f,f),h.to(u.distance(p,f)/this.speed,{position:f}),h.call((function(){d.playerHeadRunPlanB(e,t)})),void h.start()}for(var g=a;g<s.length;g++){var y=s[g],P=l(y.x,y.y);I.convertPositionToTargetNodeSpace(i.getParent(),i,P,P),h.to(u.distance(p,P)/this.speed,{position:P}),p=P}h.call((function(){d.isArriveDestinnation=!0}));var b=S.mainUiInstance.playerHeadNodes.children[e-1],L=l();I.getRandomPosInNode(b,L),I.convertPositionToTargetNodeSpace(b.getParent(),i,L,L),h.to(u.distance(p,L)/this.speed,{position:L}),h.call((function(){d.node.removeFromParent(),I.convertPositionToTargetNodeSpace(i,b,L,L),d.node.position=L,d.node.parent=b})),h.start()}-1!=a&&P.call(this,!0,a),-1!=r&&P.call(this,!1,r)},s.playerHeadRunFromYield=function(e){var t=this,i=S.mainUiInstance.buttomYieldLayout,o=y["bar"+e],n=v(this.node),s=this.node.getPosition(),a=l(o[0].x,o[0].y);I.convertPositionToTargetNodeSpace(i.getParent(),i,a,a);var r=l(a.x,s.y);n.to(u.distance(s,r)/this.speed,{position:r}),n.call((function(){t.isLeaveYieldLayout=!0})),n.to(u.distance(r,a)/this.speed,{position:a});for(var c=a,d=1;d<o.length;d++){var h=o[d],p=l(h.x,h.y);I.convertPositionToTargetNodeSpace(i.getParent(),i,p,p),n.to(u.distance(c,p)/this.speed,{position:p}),c=p}n.call((function(){t.isArriveDestinnation=!0}));var m=S.mainUiInstance.playerHeadNodes.children[e-1],f=l();I.getRandomPosInNode(m,f),I.convertPositionToTargetNodeSpace(m.getParent(),i,f,f),n.to(u.distance(c,f)/this.speed,{position:f}),n.call((function(){t.node.removeFromParent(),I.convertPositionToTargetNodeSpace(i,m,f,f),t.node.position=f,t.node.parent=m})),n.start()},s.onDestroy=function(){this.isSelf||f.removeTargetAllEventListen(this)},s.backYield=function(e){if(void 0===e&&(e=!1),this.vector&&(this.vector.active=!1),this.isSelf||S.allPlayerOnlineMap.has(this.data.userId)){if(this.isLeaveYieldLayout){if(e&&(this.isKill=!0),this.isKill){this.resetData(),this.node.setScale(1,1,1);var t=S.mainUiInstance.buttomYieldLayout,i=l();return I.getRandomPosInNode(t,i),I.convertPositionToTargetNodeSpace(t.getParent(),t,i,i),this.node.removeFromParent(),this.node.position=i,void(this.node.parent=t)}var o=y["bar"+this.clickBarIndex];this.resetData();var n=this.node.getParent(),s=this.node.getPosition(),a=3*this.speed,r=S.mainUiInstance.buttomYieldLayout;this.node.removeFromParent();var c=l();I.convertPositionToTargetNodeSpace(n,r,s,c),this.node.position=c,this.node.parent=r;for(var d=o.length,h=v(this.node),p=d-1;p>=0;p--){var m=o[p],f=l(m.x,m.y);I.convertPositionToTargetNodeSpace(r.getParent(),r,f,f),h.to(u.distance(c,f)/a,{position:f}),c=f}var g=l();I.getRandomPosInNode(r,g),I.convertPositionToTargetNodeSpace(r.getParent(),r,g,g);var P=l(c.x,g.y);h.to(u.distance(c,P)/a,{position:P}),h.to(u.distance(P,g)/a,{position:g}),h.start()}}else this.leaveRoom(this.data.userId)},s.monsterKill=function(){this.isLeaveYieldLayout&&this.clickBarIndex==S.curRoundResult.loseNum&&(this.isKill=!0,this.node.setScale(0,0,0))},s.leaveRoom=function(e){e==this.data.userId&&(S.yetCreatePlayerNode.delete(e),this.node.removeFromParent(),this.node.destroy())},s.betRoom=function(e){e.userId==this.data.userId&&-1==this.clickBarIndex&&(S.allBetPlayerMap.set(e.userId,e.pour),this.clickBarIndex=e.pour,this.playerHeadRunFromYield(e.pour))},s.speakUser=function(e){var t=this;e==this.data.userId&&(this.micNode.active=!0,-1!=this.timeId?(clearTimeout(this.timeId),this.timeId=setTimeout((function(){t.micNode.active=!1}),1e3)):this.timeId=setTimeout((function(){t.micNode.active=!1}),1e3))},s.stopSpeakUser=function(e){e==this.data.userId&&(this.micNode.active=!1,-1!=this.timeId&&(clearTimeout(this.timeId),this.timeId=-1))},s.selfbetChange=function(e){var t=this,i=this.clickBarIndex;this.isSelf&&(e<=0||(this.vector?(this.vector.active=!0,S.findNode("betLab",this.vector).getComponent(p).string=e.toString(),3==i||6==i?(this.vector.setScale(-1,1),this.vector.setPosition(-40,-10),S.findNode("betLab",this.vector).setScale(-1,1)):(this.vector.setScale(1,1),this.vector.setPosition(40,-10),S.findNode("betLab",this.vector).setScale(1,1))):P.createUI("vector",this.node,(function(o,n){t.vector=n,S.findNode("betLab",n).getComponent(p).string=e.toString(),3==i||6==i?(n.setPosition(-40,-10),n.setScale(-1,1),S.findNode("betLab",n).setScale(-1,1)):(n.setScale(1,1),n.setPosition(40,-10),S.findNode("betLab",n).setScale(1,1))}),l(40,-10,0))))},t}(m)).prototype,"headIconSp",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=t(k.prototype,"micNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=k))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/pop.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constant.ts","./EventManager.ts","./TimerModule.ts","./uiManager.ts","./gameLogic.ts"],(function(e){"use strict";var i,o,n,t,s,r,a,d,c,l,u,p,m,N,f,g,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,a=e.Node,d=e.Label,c=e.Sprite,l=e.Component},function(e){u=e.C_imgNameToIndexMap,p=e.E_gameState,m=e.E_gameEvent},function(e){N=e.default},function(e){f=e.default},function(e){g=e.UiManager},function(e){h=e.default}],execute:function(){var v,b,L,y,w,S,T,C,R,_,M;s._RF.push({},"54f17S538FNJrUjHcWqV6jV","pop",void 0);var A=r.ccclass,D=r.property;e("Pop",(v=A("Pop"),b=D(a),L=D(a),y=D(a),w=D(a),v((C=i((T=function(e){function i(){for(var i,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return i=e.call.apply(e,[this].concat(s))||this,n(i,"slayerAriseNode",C,t(i)),n(i,"winSp1",R,t(i)),n(i,"noLoseNode",_,t(i)),n(i,"loseNode",M,t(i)),i.gold="لم يتم أنفاق أي عملات ذهبية هذه المرة ولا تستطيع تحصل علي العملات الذهبية",i.flower="لم يتم أنفاق أي زهور هذه المرة ول تستطيع تحصل علي الزهور ",i.gem="لم يتم ٫انفاق أي جوهرات هذه المرة ولا تستطيع تحصل علي الجوهرة",i.main5timer=void 0,i}o(i,e);var s=i.prototype;return s.start=function(){},s.showPanel=function(e){var i=this;if("result"!=e.showPanelTypeStr){if(this[e.showName].active=!0,e.residueTime){this.main5timer||(this.main5timer=new f);var o=e.residueTime,n=h.findNode("timeLab",this.slayerAriseNode).getComponent(d);n.string=o.toString(),this.main5timer.startTimer((function(){if(o-=1,n.string=o.toString(),o<=0)return i.main5timer.stopTimer(),N.dispatch(m.e_beginToRun),void g.instance.hideDialog("popNode");1==o&&(i.main5timer.stopTimer(),i.scheduleOnce((function(){n.string="GO!",i.scheduleOnce((function(){N.dispatch(m.e_beginToRun),g.instance.hideDialog("popNode")}),1)}),1))}))}}else{if(!h.curRoundResult)return void g.instance.hideDialog("popNode");var t=h.curRoundResult;if(t.isJoin&&!t.isWin)this.loseNode.active=!0,h.findNode("killBarLab",this.loseNode).getComponent(d).string="Bar"+t.loseNum;else if(t.isJoin){this.noLoseNode.active=!0,h.findNode("noJoin",this.noLoseNode).active=!1,h.findNode("winNode",this.noLoseNode).active=!0;var s=h.findNode("winNode/getNode",this.noLoseNode),r=h.findNode("winNode/betNode",this.noLoseNode);h.findNode("moneyLab",s).getComponent(d).string=h.curRoundResult.reward.toString(),h.findNode("moneyLab",r).getComponent(d).string=h.myTotalBet.toString(),h.findNode("currencyIcon",s).getComponent(c).spriteFrame=h.mainUiInstance.spFArrList[u[h.gameMode]],h.findNode("currencyIcon",r).getComponent(c).spriteFrame=h.mainUiInstance.spFArrList[u[h.gameMode]]}else this.noLoseNode.active=!0,h.findNode("noJoin",this.noLoseNode).active=!0,h.findNode("winNode",this.noLoseNode).active=!1,h.findNode("noJoin/descLab",this.noLoseNode).getComponent(d).string=this[h.gameMode];this.scheduleOnce((function(){g.instance.hideDialog("popNode"),h.gameState=p.e_unkown,h.mainUiInstance.doorChange()}),2)}},s.onDisable=function(){this.unscheduleAllCallbacks(),this.slayerAriseNode.active=!1,this.winSp1.active=!1,this.noLoseNode.active=!1,this.loseNode.active=!1},i}(l)).prototype,"slayerAriseNode",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=i(T.prototype,"winSp1",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=i(T.prototype,"noLoseNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=i(T.prototype,"loseNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=T))||S));s._RF.pop()}}}));

System.register("chunks:///_virtual/record.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventManager.ts","./constant.ts","./socketIO.ts","./uiManager.ts","./gameLogic.ts"],(function(t){"use strict";var e,o,n,i,r,a,s,d,c,l,u,f,g,m,p,h,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Prefab,d=t.Widget,c=t.Label,l=t.Color,u=t.instantiate,f=t.Component},function(t){g=t.default},function(t){m=t.E_gameEvent},function(t){p=t.default},function(t){h=t.UiManager},function(t){b=t.default}],execute:function(){var L,N,y,v,C;r._RF.push({},"99fa1T0Xw5L0YVPH6GBIvma","record",void 0);var S=a.ccclass,w=a.property;t("Record",(L=S("Record"),N=w({type:s,tooltip:"记录item的预制"}),L((C=e((v=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"recordItemPrefab",C,i(e)),e.resultLabArr=["تجنب الفشل","تجنب النجاح"],e.resultColorArr=["#EA3337","#E4B48A"],e.magazine="الجولة",e.historyList=null,e}o(e,t);var r=e.prototype;return r.onLoad=function(){b.findNode("backBtnNode",this.node).getComponent(d).target=this.node.parent,g.registerEventListen(m.e_betHistory,this.updateHistory,this)},r.onEnable=function(){p.emitHistory(),this.updateHistory(this.historyList)},r.updateHistory=function(t){if(t){this.historyList=t;for(var e=b.findNode("history100",this.node),o=1;o<=8;o++){var n=b.findNode("NodeBar"+o,e);b.findNode("coinSp/coinLab",n).getComponent(c).string=t.lastList[o]?t.lastList[o]:"0"}for(var i=b.findNode("history10",this.node),r=0;r<10;r++){var a=b.findNode("NodeBar"+(r+1),i);t.lastTenList[r]?(a.active=!0,b.findNode("barSp/barLab",a).getComponent(c).string="Bar"+t.lastTenList[r].loseNum.toString(),b.findNode("barSp/periodsLab",a).getComponent(c).string=t.lastTenList[r].issues.toString()+" "+this.magazine):a.active=!1}var s=b.findNode("myJoinHistoryNode",this.node);if(b.findNode("getNode/moneyLab",s).getComponent(c).string=t.rewardSum.toString(),b.findNode("betNode/moneyLab",s).getComponent(c).string=t.betSum.toString(),0==t.list.length)b.findNode("noRecordLab",this.node).active=!0;else for(var d=b.findNode("ScrollView/view/content",this.node),l=0;l<20;l++){var u=t.list[l];u&&this.creatorHistoryItem(u,l,d)}}},r.creatorHistoryItem=function(t,e,o){var n=o.children[e];n||(n=this.instantiatePrefab(o)),b.findNode("timeLab",n).getComponent(c).string=t.date+" "+t.issues+" "+this.magazine;var i=b.findNode("resultLab",n).getComponent(c);t.rewardSum>0?(i.string=this.resultLabArr[1],i.color=new l(this.resultColorArr[1])):(i.string=this.resultLabArr[0],i.color=new l(this.resultColorArr[0])),b.findNode("killerGoLab",n).getComponent(c).string="[Bar"+t.loseNum+"]",b.findNode("myChooseRoomLab",n).getComponent(c).string="[Bar"+t.bet[0]+"]",b.findNode("winLab",n).getComponent(c).string=t.rewardSum,b.findNode("putIntoLab",n).getComponent(c).string=t.betSum},r.instantiatePrefab=function(t){var e=u(this.recordItemPrefab);return t.addChild(e),e},r.backMainUI=function(){h.instance.hideDialog("recordNode")},e}(f)).prototype,"recordItemPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=v))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/resourceUtil.ts",["cc"],(function(e){"use strict";var o,r,t,n,s,u;return{setters:[function(e){o=e.cclegacy,r=e.resources,t=e.Prefab,n=e.v3,s=e.instantiate,u=e.AudioClip}],execute:function(){o._RF.push({},"4cd704UTBxFt4UnYVbA/x8h","resourceUtil",void 0);e("default",function(){function e(){}return e.loadResourcesBundle=function(e,o,t){var n=r.get(e,o);if(n)return t(null,n);o?r.load(e,o,(function(e,o){if(e)return console.error(e.message||e),void(t&&t(e,o));t&&t(e,o)})):r.load(e,(function(e,o){if(e)return console.error(e.message||e),void(t&&t(e,o));t&&t(e,o)}))},e.getUIPrefabRes=function(e,o){this.loadResourcesBundle("prefab/"+e,t,o)},e.createUI=function(e,o,r,t){void 0===t&&(t=n(0,0,0)),this.getUIPrefabRes(e,(function(e,n){if(e)r&&r(e,null);else{var u=s(n);u.setPosition(t),o.addChild(u),r&&r(null,u)}}))},e.loadMusic=function(e,o){this.loadResourcesBundle(e,u,o)},e.preloadAsset=function(){r.preload("prefab/chooseMode",t),r.preload("prefab/popNode",t),r.preload("prefab/recordItem",t),r.preload("prefab/recordNode",t),r.preload("prefab/vector",t),r.preload("prefab/helpNode",t)},e}());o._RF.pop()}}}));

System.register("chunks:///_virtual/socketIO.ts",["cc","./socket.io.mjs_cjs=&original=.js","./gameLogic.ts","./EventManager.ts","./constant.ts","./uiManager.ts","./util.ts","./socket.io.js"],(function(e){"use strict";var t,o,n,a,c,s,i,r,l,u,m;return{setters:[function(e){t=e.cclegacy},null,function(e){o=e.default},function(e){n=e.default},function(e){a=e.E_gameState,c=e.E_gameEvent,s=e.E_gameSocketEvent,i=e.E_gameMode,r=e.E_battle_roomMsg},function(e){l=e.UiManager},function(e){u=e.Util},function(e){m=e.default}],execute:function(){t._RF.push({},"24175To3WFDVImFxWG716qK","socketIO",void 0);var g=e("default",function(){function e(){}return e.toConnect=function(){this._beginCostTime=Date.now();var e=o.getPlayerToken(),t=o.getSocketIOUrl();o.gameState=a.e_connectIng;var n=m(t,{withCredentials:!0,extraHeaders:{token:e},transports:["polling","websocket","webtransport"]});this._socketIo=n,this._registerSocketListeningEvent(n),this._registerListeningEvent(n)},e.closeSocket=function(){this._socketIo.close()},e._registerSocketListeningEvent=function(e){var t=this;function s(){this._beginCostTime=Date.now(),o.gameState=a.e_connectFail,n.dispatch(c.e_diconnectSocketIO),o.showToast("CONNECT FAIL,TRY AGAIN")}n.registerEventListen(c.e_androidRefreshBalance,this.emitGetBalance,this,!1),e.on("connect",(function(){console.log("连接成功 消耗时间ms:",Date.now()-t._beginCostTime),o.gameState=a.e_connectSucceed,n.dispatch(c.e_connect,!0)})),e.on("disconnect",(function(e){console.error("disconnect:",e),s.call(t)})),e.on("error",(function(e){console.error("error",e),s.call(t)})),e.on("connect_error",(function(e){console.error("connect_error:",e),s.call(t)}))},e.emitGetBalance=function(){var e=Date.now();this._socketIo.emit(s.e_getBalance,{},(function(t){console.log("请求玩家余额",t,"花费时间ms:",Date.now()-e),200==t.code&&(o.updateCurrency(i.gold,t.gold),o.updateCurrency(i.flower,t.flower),o.updateCurrency(i.gem,t.gem),o.oneRoundTime=t.gameOverTime,n.dispatch(c.e_resetMyCurrency))}))},e.emitBet=function(e,t){this._socketIo.disconnected||this._socketIo.emit(s.e_battle_bet,{currency:o.gameMode,amount:e,pour:t,gameId:o.curGameId},(function(e){console.log("投注",e),n.dispatch(c.e_betSuccess,e)}))},e.joinBattleRoom=function(e){var t=Date.now();o.exitVoiceRoom(),this._socketIo.emit(s.e_battle_join,{currency:e},(function(e){console.log("加入大逃杀房间:",e,"花费时间ms:",Date.now()-t),200==e.code?(o.gameState=a.e_gameWaiting,o.joinBattleRoomBackData=e,o.curGameId=e.gameId,o.curCountTime=e.countDown,o.selfInfoData.avatar=e.avatar,o.selfInfoData.chatRoomId=e.chatRoomId,o.selfInfoData.userId=e.userId,o.selfInfoData.rtcToken=e.rtcToken,o.inviteRoom(o.selfInfoData.rtcToken,o.selfInfoData.chatRoomId),o.starBGM(!0),e.myRecord.length>0?(o.curChooseRoomIndex=e.myRecord[0].pour,e.myRecord.forEach((function(e,t){o.myTotalBet+=parseFloat(e.amount)}))):o.myTotalBet=0,o.mainUiInstance.initSelfHead(),n.dispatch(c.e_joinGameModeSuccess)):o.showToast("JOIN BattleRoom FAIL,TRY AGAIN")}))},e._registerListeningEvent=function(e){var t=this;function i(e){var t=e.msgType;if(t==r.e_battle_room_join){var a=e.joinUserId;if(a==o.selfInfoData.userId)return;o.allPlayerOnlineMap.set(a,!0),n.dispatch(c.e_joinRoom,{id:a,avatar:e.avatar})}else if(t==r.e_battle_room_leave){var s=e.leaveUserId;if(s==o.selfInfoData.userId)return;o.allPlayerOnlineMap.delete(s),o.allBetPlayerMap.has(s)||n.dispatch(c.e_leaveRoom,s)}else if(t==r.e_battle_room_bet_success){var i=e.userId;if(i==o.selfInfoData.userId)return;var u=e.pour,m=e.amount;n.dispatch(c.e_betRoom,{userId:i,pour:u,amount:m})}var g=e.msgStatus;"game_start"==g?(o.curGameId=e.gameId,o.curCountTime=e.countDown,l.instance.hideDialog("popNode"),n.dispatch(c.e_backYield,!0),n.dispatch(c.e_joinGameModeSuccess)):"game_settle"==g||"game_over"==g||"game_end"==g&&this.emitGetBalance()}e.on(s.e_NBattle_gold_msg,(function(e){console.log("金币房间消息"+e.msgStatus,u.getTime(),e),"gold"==o.gameMode&&o.gameState!=a.e_changeModeIng&&i.call(t,e)})),e.on(s.e_NBattle_gem_msg,(function(e){console.log("钻石房间消息"+e.msgStatus,u.getTime(),e),"gem"==o.gameMode&&o.gameState!=a.e_changeModeIng&&i.call(t,e)})),e.on(s.e_NBattle_flower_msg,(function(e){console.log("鲜花房间消息"+e.msgStatus,u.getTime(),e),"flower"==o.gameMode&&o.gameState!=a.e_changeModeIng&&i.call(t,e)})),e.on(s.e_NBattle_settle_msg,(function(e){o.gameState!=a.e_changeModeIng&&o.gameMode==e.currency&&(console.log("收到结算消息",u.getTime(),e),o.curRoundResult=e,n.dispatch(c.e_beginToRun))}))},e.emitHistory=function(){this._socketIo.disconnected||this._socketIo.emit(s.e_betHistory,{currency:o.gameMode},(function(e){200==e.code&&n.dispatch(c.e_betHistory,e)}))},e}());g._socketIo=void 0,g._beginCostTime=0,t._RF.pop()}}}));

System.register("chunks:///_virtual/TimerModule.ts",["cc"],(function(t){"use strict";var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"9f256zoyIRPiokCBavuQsrV","TimerModule",void 0);t("default",function(){function t(){this.timer=void 0,this.timeCount=1e3,this.timer=-1}var i=t.prototype;return i.startTimer=function(t){-1!==this.timer&&this.stopTimer(),this.timer=setInterval((function(){t()}),this.timeCount)},i.stopTimer=function(t){-1!==this.timer&&(clearInterval(this.timer),this.timer=-1)},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameLogic.ts","./resourceUtil.ts"],(function(i){"use strict";var t,e,a,n;return{setters:[function(i){t=i.createClass},function(i){e=i.cclegacy},function(i){a=i.default},function(i){n=i.default}],execute:function(){e._RF.push({},"b8e92VbnNpEbYcScu8v5a5C","uiManager",void 0);i("UiManager",function(){function i(){this.yetCacheDictPanel={},this.dealWithIngDictPanel={},this.arrPopupDialog=[],this.showTipsTime=0}var e=i.prototype;return e.showDialog=function(i,t,e,o,s){var h=this;if(!this.dealWithIngDictPanel[i]){if(o=o||[],t=t||a.gameRootUiInstance.popUiNode,this.yetCacheDictPanel.hasOwnProperty(i)){var c=this.yetCacheDictPanel[i];c.active=!0;var p=c.getComponent(e);return p.show&&p.show.apply(p,o),void(s&&s.call(p))}this.dealWithIngDictPanel[i]=!0,n.createUI(i,t,(function(t,a){if(t)h.dealWithIngDictPanel[i]=!1;else{h.yetCacheDictPanel[i]=a;var n=a.getComponent(e);n.show&&n.show.apply(n,o),s&&s.call(n),h.dealWithIngDictPanel[i]=!1}}))}},e.hideDialog=function(i,t){this.yetCacheDictPanel.hasOwnProperty(i)&&(this.yetCacheDictPanel[i].active=!1,t&&t())},e.pushToPopupSeq=function(i,t,e){var a={panelPath:i,scriptName:t,param:e,isShow:!1};this.arrPopupDialog.push(a),this.checkPopupSeq()},e.insertToPopupSeq=function(i,t,e){var a={panelPath:t,param:e,isShow:!1};this.arrPopupDialog.splice(i,0,a)},e.shiftFromPopupSeq=function(i){var t=this;this.hideDialog(i,(function(){t.arrPopupDialog[0]&&t.arrPopupDialog[0].panelPath===i&&(t.arrPopupDialog.shift(),t.checkPopupSeq())}))},e.checkPopupSeq=function(){if(this.arrPopupDialog.length>0){var i=this.arrPopupDialog[0];i.isShow||(this.showDialog(i.panelPath,i.param),this.arrPopupDialog[0].isShow=!0)}},e.showTips=function(i,t){var e=Date.now();if(e-this.showTipsTime<800){var a=800-(e-this.showTipsTime),n=this;setTimeout(function(i,t){n._showTipsAni(i,t)}.bind(this,i,t),a),this.showTipsTime=e+a}else this._showTipsAni(i,t),this.showTipsTime=e},e._showTipsAni=function(i,t){},t(i,null,[{key:"instance",get:function(){return this._instance||(this._instance=new i),this._instance}}]),i}())._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["cc","./gameLogic.ts"],(function(t){"use strict";var e,n,o,r,i,a,g,u;return{setters:[function(t){e=t.cclegacy,n=t.v3,o=t.UITransform,r=t.assetManager,i=t.SpriteFrame,a=t.Texture2D,g=t.Size},function(t){u=t.default}],execute:function(){e._RF.push({},"0aa47OWWm9JrKUXIRa1dkYs","util",void 0);t("Util",function(){function t(){}return t.getRandomNFromM=function(t,e){for(var n=[],o=0,r=0;r<e&&!(r>=t+1);){o=this.getRandomInt(0,t);for(var i=0,a=0;a<r;a++)if(n[a]===o){i=1;break}0===i&&(n[r]=o,r++)}return n},t.getRandomInt=function(t,e){var n=Math.random()*(e-t+1)+t;return Math.floor(n)},t.getRandomFloatInRange=function(t,e){var n=Math.random()*(e-t+1)+t;return n>e?this.getRandomFloatInRange(t,e):n},t.convertPositionToTargetNodeSpace=function(t,e,r,i){var a=r||t.getPosition();return i=i||n(),t.getComponent(o).convertToWorldSpaceAR(a,i),e.getComponent(o).convertToNodeSpaceAR(i,i),i},t.getRandomPosInNode=function(e,r){var i=e.getPosition(),a=e.getComponent(o),g=a.contentSize,u=t.getRandomFloatInRange(i.x-g.width*a.anchorX,i.x+g.width*(1-a.anchorX)),c=t.getRandomFloatInRange(i.y-g.height*a.anchorY,i.y+g.height*(1-a.anchorY));return(r=r||n()).set(u,c),r},t.isPointOnSegment=function(t,e,n){var o=!1,r=0;if(n.y-e.y==0)r=t.y-n.y;else if(n.x-e.x==0)r=t.x-n.x;else{var i=(t.x-e.x)/(n.x-e.x)*(n.y-e.y)+e.y;r=t.y-i}return Math.abs(r)<=1&&(o=!0),o},t.setPlayerHeadImg=function(t,e,n,c){var f=this;t=u.getImgCdn()+t,r.loadRemote(t,(function(t,r){if(t)console.error("加载头像失败",t);else{var u=new i,s=new a;if(s.image=r,u.texture=s,e.isValid){var d=f.getCurWidAHig(n,c,r.width,r.height);e.node.getComponent(o).setContentSize(new g(d.designWidth,d.designHight)),e.spriteFrame=u}}}))},t.getCurWidAHig=function(t,e,n,o){if(n==o)return{designWidth:t,designHight:e};if(o>n){return{designWidth:t,designHight:t*o/n}}return{designWidth:e*n/o,designHight:e}},t.getDay=function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},t.formatMoney=function(t){for(var e=["","K","M","G","T","P","E","Z","Y","B","N","D"],n="",o=0;o<e.length;o++){if(!(t>=1e4)){n=Math.floor(t)+e[o];break}t/=1e3}return""===n&&(n=Math.floor(t)+"U"),n},t.formatTimeForSecond=function(t){var e="",n=t%60,o=Math.floor(t/60);o=o<0?0:o;var r=Math.floor(o/60),i=o%60;return r>0&&(e+=r>9?r.toString():"0"+r,e+=":"),e+=i>9?i.toString():"0"+i,e+=":",e+=n>9?n.toString():"0"+n},t.formatTimeForMillisecond=function(t){var e=Math.floor(t/1e3%60),n=Math.floor(t/1e3/60%60),o=Math.floor(t/1e3/60/60);return(e<10?"0"+e:e)+":"+(n<10?"0"+n:n)+":"+(o<10?"0"+o:o)},t.getTime=function(t){void 0===t&&(t=Date.now());var e=new Date(t);return e.getFullYear()+":"+(e.getMonth()+1)+":"+e.getDate()+":"+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},t}());e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});